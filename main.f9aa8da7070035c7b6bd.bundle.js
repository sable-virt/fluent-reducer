(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{267:function(module,exports,__webpack_require__){__webpack_require__(268),__webpack_require__(414),module.exports=__webpack_require__(415)},332:function(module,exports){},415:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var _storybook_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(266);module._StorybookPreserveDecorators=!0,Object(_storybook_react__WEBPACK_IMPORTED_MODULE_0__.configure)([__webpack_require__(605)],module)}.call(this,__webpack_require__(416)(module))},55:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ReactFluentReducer_ReactFluentReducer}));var extendStatics,immer_esm=__webpack_require__(164),AsyncActionCreator=function AsyncActionCreator(type,param,handler,started,failed,done){this.type=type,this.param=param,this.handler=handler,this.started=started,this.failed=failed,this.done=done},__awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},DEFAULT_OPTION={middlewares:[],verbose:!1},FluentReducer_FluentReducer=function(){function FluentReducer(initialState,op){var _this=this;void 0===op&&(op={}),this.initialState=initialState,this._option=Object.assign({},DEFAULT_OPTION),this._listeners=new Map,this._handle={},this.reducer=function(state,action){var newState=Object(immer_esm.a)(state,(function(draft){return _this._exec(draft,action),_this._option.middlewares.forEach((function(middleware){middleware(draft,action)})),draft}));return _this._state=Object.freeze(newState),_this._listeners.forEach((function(listener){listener(_this._state,action)})),_this._state},Object.assign(this._option,op),this._state=Object(immer_esm.a)({},(function(draft){Object.assign(draft,initialState)})),this._exec=function(state,action){var handler=_this._handle[action.type];return _this._option.verbose&&console.log(action),handler?handler(state,action):state}}return FluentReducer.prototype._caseWithAction=function(type,handler){return this._handle[type]=handler,function(payload){return{type:type,payload:payload}}},FluentReducer.prototype.getState=function(){return Object.freeze(this._state)},FluentReducer.prototype._dispatch=function(action){this.reducer(this._state,action)},FluentReducer.prototype.dispatch=function(action){var _this=this;return action instanceof AsyncActionCreator?new Promise((function(resolve,reject){return __awaiter(_this,void 0,void 0,(function(){var result,e_1;return __generator(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,2,,3]),this._dispatch(action.started(action.param)),[4,action.handler(action.param,this.dispatch.bind(this),this.getState.bind(this))];case 1:return result=_a.sent(),this._dispatch(action.done({params:action.param,result:result})),resolve(result),[3,3];case 2:return e_1=_a.sent(),this._dispatch(action.failed({params:action.param,error:e_1})),reject(e_1),[3,3];case 3:return[2]}}))}))})):this._dispatch(action)},FluentReducer.prototype.sync=function(type,handler){return this._caseWithAction(type,(function(state,action){return handler(state,action.payload)}))},FluentReducer.prototype.async=function(type,handler,handlers){void 0===handlers&&(handlers={});var started=this.sync(type+"__STARTED",(function(state,payload){return handlers.started?handlers.started(state,payload):state})),failed=this.sync(type+"__FAILED",(function(state,result){return handlers.failed?handlers.failed(state,result):state})),done=this.sync(type+"__DONE",(function(state,result){return handlers.done?handlers.done(state,result):state}));return function(param){return new AsyncActionCreator(type,param,handler,started,failed,done)}},FluentReducer.prototype.subscribe=function(listener){this._listeners.set(listener,listener)},FluentReducer.prototype.unsubscribe=function(listener){this._listeners.delete(listener)},FluentReducer.prototype.unsubsribeAll=function(){this._listeners.clear()},FluentReducer}(),react=__webpack_require__(1),__extends=(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),ReactFluentReducer_ReactFluentReducer=function(_super){function ReactFluentReducer(initialState,op){void 0===op&&(op={});var _this=_super.call(this,initialState,op)||this;return _this.initialState=initialState,_this}return __extends(ReactFluentReducer,_super),ReactFluentReducer.prototype.useFluentReducer=function(){var _this=this,_a=Object(react.useState)(this.getState()),state=_a[0],setState=_a[1],update=Object(react.useCallback)((function(newState,action){setState(newState)}),[]),dispatch=Object(react.useMemo)((function(){return _this.dispatch.bind(_this)}),[]);return Object(react.useEffect)((function(){return _this.subscribe(update),function(){_this.unsubscribe(update)}})),[state,dispatch]},ReactFluentReducer}(FluentReducer_FluentReducer)},605:function(module,exports,__webpack_require__){var map={"./0-Basic.stories.tsx":606,"./1-Middleware.stories.tsx":609,"./2-Subscribe.stories.tsx":610};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=605},606:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"SyncAction",(function(){return SyncAction})),__webpack_require__.d(__webpack_exports__,"AsyncAction",(function(){return AsyncAction}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_src__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(55),addSourceDecorator=(__webpack_require__(16).withSource,__webpack_require__(16).addSource),__SOURCE_PREFIX__=(__webpack_require__(16).withSource,addSourceDecorator=__webpack_require__(16).addSource,"C:\\Users\\sable\\Documents\\projects\\fluent-reducer\\stories"),__STORY__="import React, { useCallback, useMemo } from 'react'\r\nimport { ReactFluentReducer } from '../src'\r\nexport default {\r\n  title: 'Basic',\r\n}\r\ninterface IRootState {\r\n  name: string\r\n  age: number\r\n  status: string\r\n}\r\nconst DEFAULT_STATE: IRootState = {\r\n  name: 'test',\r\n  age: 20,\r\n  status: 'wait'\r\n}\r\n\r\nexport const SyncAction = () => {\r\n  const reducer = useMemo(() => new ReactFluentReducer<'test', IRootState>(DEFAULT_STATE), [])\r\n  const changeName = useMemo(() => reducer.sync<string>('TEST', (state, name) => {\r\n    state.name = name\r\n  }), [reducer])\r\n\r\n  return React.createElement(() => {\r\n    const [state, dispatch] = reducer.useFluentReducer()\r\n    const _handleOnClick = useCallback(() => {\r\n      dispatch(changeName(Date.now().toString()))\r\n    }, [dispatch])\r\n    return (\r\n      <div>\r\n        <button onClick={_handleOnClick}>click</button>\r\n        <div>{state.name}</div>\r\n      </div>\r\n    )\r\n  })\r\n}\r\nSyncAction.story = {\r\n  name: 'Sync Action',\r\n}\r\n\r\nexport const AsyncAction = () => {\r\n  const reducer = useMemo(() => new ReactFluentReducer<'test', IRootState>(DEFAULT_STATE), [])\r\n  const changeName = useMemo(() => reducer.async<string, string, Error>('TEST', (name) => {\r\n    return new Promise((resolve, reject) => {\r\n      setTimeout(() => {\r\n        if (name) {\r\n          resolve(name)\r\n        } else {\r\n          reject(new Error('name is required'))\r\n        }\r\n      }, 2000)\r\n    })\r\n  }, {\r\n    started(state, name) {\r\n      state.status = 'started'\r\n    },\r\n    failed(state, { error }) {\r\n      console.error(error)\r\n      state.status = 'failed'\r\n    },\r\n    done(state, { result }) {\r\n      state.name = result\r\n      state.status = 'done'\r\n    }\r\n  }), [reducer])\r\n  return React.createElement(() => {\r\n    const [state, dispatch] = reducer.useFluentReducer()\r\n    const _handleOnClick = useCallback(() => {\r\n      dispatch(changeName(Date.now().toString()))\r\n    }, [dispatch])\r\n    return (\r\n      <div>\r\n        <button onClick={_handleOnClick} disabled={state.status === 'started'}>click</button>\r\n        <div>{state.status}: {state.name}</div>\r\n      </div>\r\n    )\r\n  })\r\n}\r\nAsyncAction.story = {\r\n  name: 'Async Action',\r\n}\r\n",__ADDS_MAP__={"basic--sync-action":{startLoc:{col:26,line:17},endLoc:{col:1,line:35},startBody:{col:26,line:17},endBody:{col:1,line:35}},"basic--async-action":{startLoc:{col:27,line:40},endLoc:{col:1,line:77},startBody:{col:27,line:40},endBody:{col:1,line:77}}},__MODULE_DEPENDENCIES__=[],__LOCAL_DEPENDENCIES__={},__IDS_TO_FRAMEWORKS__={};__webpack_exports__.default={parameters:{storySource:{source:'\n\n// @ts-nocheck\n// @ts-ignore\nvar withSourceLoader = require(\'@storybook/source-loader/preview\').withSource;\n// @ts-ignore\nvar addSourceDecorator = require("@storybook/source-loader/preview").addSource;\n// @ts-ignore\nvar __SOURCE_PREFIX__ = "C:\\\\Users\\\\sable\\\\Documents\\\\projects\\\\fluent-reducer\\\\stories";\n// @ts-ignore\nvar __STORY__ = "import React, { useCallback, useMemo } from \'react\'\\r\\nimport { ReactFluentReducer } from \'../src\'\\r\\nexport default {\\r\\n  title: \'Basic\',\\r\\n}\\r\\ninterface IRootState {\\r\\n  name: string\\r\\n  age: number\\r\\n  status: string\\r\\n}\\r\\nconst DEFAULT_STATE: IRootState = {\\r\\n  name: \'test\',\\r\\n  age: 20,\\r\\n  status: \'wait\'\\r\\n}\\r\\n\\r\\nexport const SyncAction = () => {\\r\\n  const reducer = useMemo(() => new ReactFluentReducer<\'test\', IRootState>(DEFAULT_STATE), [])\\r\\n  const changeName = useMemo(() => reducer.sync<string>(\'TEST\', (state, name) => {\\r\\n    state.name = name\\r\\n  }), [reducer])\\r\\n\\r\\n  return React.createElement(() => {\\r\\n    const [state, dispatch] = reducer.useFluentReducer()\\r\\n    const _handleOnClick = useCallback(() => {\\r\\n      dispatch(changeName(Date.now().toString()))\\r\\n    }, [dispatch])\\r\\n    return (\\r\\n      <div>\\r\\n        <button onClick={_handleOnClick}>click</button>\\r\\n        <div>{state.name}</div>\\r\\n      </div>\\r\\n    )\\r\\n  })\\r\\n}\\r\\nSyncAction.story = {\\r\\n  name: \'Sync Action\',\\r\\n}\\r\\n\\r\\nexport const AsyncAction = () => {\\r\\n  const reducer = useMemo(() => new ReactFluentReducer<\'test\', IRootState>(DEFAULT_STATE), [])\\r\\n  const changeName = useMemo(() => reducer.async<string, string, Error>(\'TEST\', (name) => {\\r\\n    return new Promise((resolve, reject) => {\\r\\n      setTimeout(() => {\\r\\n        if (name) {\\r\\n          resolve(name)\\r\\n        } else {\\r\\n          reject(new Error(\'name is required\'))\\r\\n        }\\r\\n      }, 2000)\\r\\n    })\\r\\n  }, {\\r\\n    started(state, name) {\\r\\n      state.status = \'started\'\\r\\n    },\\r\\n    failed(state, { error }) {\\r\\n      console.error(error)\\r\\n      state.status = \'failed\'\\r\\n    },\\r\\n    done(state, { result }) {\\r\\n      state.name = result\\r\\n      state.status = \'done\'\\r\\n    }\\r\\n  }), [reducer])\\r\\n  return React.createElement(() => {\\r\\n    const [state, dispatch] = reducer.useFluentReducer()\\r\\n    const _handleOnClick = useCallback(() => {\\r\\n      dispatch(changeName(Date.now().toString()))\\r\\n    }, [dispatch])\\r\\n    return (\\r\\n      <div>\\r\\n        <button onClick={_handleOnClick} disabled={state.status === \'started\'}>click</button>\\r\\n        <div>{state.status}: {state.name}</div>\\r\\n      </div>\\r\\n    )\\r\\n  })\\r\\n}\\r\\nAsyncAction.story = {\\r\\n  name: \'Async Action\',\\r\\n}\\r\\n";\n// @ts-ignore\nvar __ADDS_MAP__ = {"basic--sync-action":{"startLoc":{"col":26,"line":17},"endLoc":{"col":1,"line":35},"startBody":{"col":26,"line":17},"endBody":{"col":1,"line":35}},"basic--async-action":{"startLoc":{"col":27,"line":40},"endLoc":{"col":1,"line":77},"startBody":{"col":27,"line":40},"endBody":{"col":1,"line":77}}};\n// @ts-ignore\nvar __MAIN_FILE_LOCATION__ = "/0-Basic.stories.tsx";\n// @ts-ignore\nvar __MODULE_DEPENDENCIES__ = [];\n// @ts-ignore\nvar __LOCAL_DEPENDENCIES__ = {};\n// @ts-ignore\nvar __IDS_TO_FRAMEWORKS__ = {};\n        \nimport React, { useCallback, useMemo } from \'react\'\r\nimport { ReactFluentReducer } from \'../src\'\r\nexport default {parameters: {"storySource":{"source":"import React, { useCallback, useMemo } from \'react\'\\r\\nimport { ReactFluentReducer } from \'../src\'\\r\\nexport default {\\r\\n  title: \'Basic\',\\r\\n}\\r\\ninterface IRootState {\\r\\n  name: string\\r\\n  age: number\\r\\n  status: string\\r\\n}\\r\\nconst DEFAULT_STATE: IRootState = {\\r\\n  name: \'test\',\\r\\n  age: 20,\\r\\n  status: \'wait\'\\r\\n}\\r\\n\\r\\nexport const SyncAction = () => {\\r\\n  const reducer = useMemo(() => new ReactFluentReducer<\'test\', IRootState>(DEFAULT_STATE), [])\\r\\n  const changeName = useMemo(() => reducer.sync<string>(\'TEST\', (state, name) => {\\r\\n    state.name = name\\r\\n  }), [reducer])\\r\\n\\r\\n  return React.createElement(() => {\\r\\n    const [state, dispatch] = reducer.useFluentReducer()\\r\\n    const _handleOnClick = useCallback(() => {\\r\\n      dispatch(changeName(Date.now().toString()))\\r\\n    }, [dispatch])\\r\\n    return (\\r\\n      <div>\\r\\n        <button onClick={_handleOnClick}>click</button>\\r\\n        <div>{state.name}</div>\\r\\n      </div>\\r\\n    )\\r\\n  })\\r\\n}\\r\\nSyncAction.story = {\\r\\n  name: \'Sync Action\',\\r\\n}\\r\\n\\r\\nexport const AsyncAction = () => {\\r\\n  const reducer = useMemo(() => new ReactFluentReducer<\'test\', IRootState>(DEFAULT_STATE), [])\\r\\n  const changeName = useMemo(() => reducer.async<string, string, Error>(\'TEST\', (name) => {\\r\\n    return new Promise((resolve, reject) => {\\r\\n      setTimeout(() => {\\r\\n        if (name) {\\r\\n          resolve(name)\\r\\n        } else {\\r\\n          reject(new Error(\'name is required\'))\\r\\n        }\\r\\n      }, 2000)\\r\\n    })\\r\\n  }, {\\r\\n    started(state, name) {\\r\\n      state.status = \'started\'\\r\\n    },\\r\\n    failed(state, { error }) {\\r\\n      console.error(error)\\r\\n      state.status = \'failed\'\\r\\n    },\\r\\n    done(state, { result }) {\\r\\n      state.name = result\\r\\n      state.status = \'done\'\\r\\n    }\\r\\n  }), [reducer])\\r\\n  return React.createElement(() => {\\r\\n    const [state, dispatch] = reducer.useFluentReducer()\\r\\n    const _handleOnClick = useCallback(() => {\\r\\n      dispatch(changeName(Date.now().toString()))\\r\\n    }, [dispatch])\\r\\n    return (\\r\\n      <div>\\r\\n        <button onClick={_handleOnClick} disabled={state.status === \'started\'}>click</button>\\r\\n        <div>{state.status}: {state.name}</div>\\r\\n      </div>\\r\\n    )\\r\\n  })\\r\\n}\\r\\nAsyncAction.story = {\\r\\n  name: \'Async Action\',\\r\\n}\\r\\n","locationsMap":{"basic--sync-action":{"startLoc":{"col":26,"line":17},"endLoc":{"col":1,"line":35},"startBody":{"col":26,"line":17},"endBody":{"col":1,"line":35}},"basic--async-action":{"startLoc":{"col":27,"line":40},"endLoc":{"col":1,"line":77},"startBody":{"col":27,"line":40},"endBody":{"col":1,"line":77}}}},},\r\n  title: \'Basic\',\r\n}\r\ninterface IRootState {\r\n  name: string\r\n  age: number\r\n  status: string\r\n}\r\nconst DEFAULT_STATE: IRootState = {\r\n  name: \'test\',\r\n  age: 20,\r\n  status: \'wait\'\r\n}\r\n\r\nexport const SyncAction = addSourceDecorator(() => {\r\n  const reducer = useMemo(() => new ReactFluentReducer<\'test\', IRootState>(DEFAULT_STATE), [])\r\n  const changeName = useMemo(() => reducer.sync<string>(\'TEST\', (state, name) => {\r\n    state.name = name\r\n  }), [reducer])\r\n\r\n  return React.createElement(() => {\r\n    const [state, dispatch] = reducer.useFluentReducer()\r\n    const _handleOnClick = useCallback(() => {\r\n      dispatch(changeName(Date.now().toString()))\r\n    }, [dispatch])\r\n    return (\r\n      <div>\r\n        <button onClick={_handleOnClick}>click</button>\r\n        <div>{state.name}</div>\r\n      </div>\r\n    )\r\n  })\r\n}, {__STORY__, __ADDS_MAP__,__MAIN_FILE_LOCATION__,__MODULE_DEPENDENCIES__,__LOCAL_DEPENDENCIES__,__SOURCE_PREFIX__,__IDS_TO_FRAMEWORKS__});\r\nSyncAction.story = {\r\n  name: \'Sync Action\',\r\n}\r\n\r\nexport const AsyncAction = addSourceDecorator(() => {\r\n  const reducer = useMemo(() => new ReactFluentReducer<\'test\', IRootState>(DEFAULT_STATE), [])\r\n  const changeName = useMemo(() => reducer.async<string, string, Error>(\'TEST\', (name) => {\r\n    return new Promise((resolve, reject) => {\r\n      setTimeout(() => {\r\n        if (name) {\r\n          resolve(name)\r\n        } else {\r\n          reject(new Error(\'name is required\'))\r\n        }\r\n      }, 2000)\r\n    })\r\n  }, {\r\n    started(state, name) {\r\n      state.status = \'started\'\r\n    },\r\n    failed(state, { error }) {\r\n      console.error(error)\r\n      state.status = \'failed\'\r\n    },\r\n    done(state, { result }) {\r\n      state.name = result\r\n      state.status = \'done\'\r\n    }\r\n  }), [reducer])\r\n  return React.createElement(() => {\r\n    const [state, dispatch] = reducer.useFluentReducer()\r\n    const _handleOnClick = useCallback(() => {\r\n      dispatch(changeName(Date.now().toString()))\r\n    }, [dispatch])\r\n    return (\r\n      <div>\r\n        <button onClick={_handleOnClick} disabled={state.status === \'started\'}>click</button>\r\n        <div>{state.status}: {state.name}</div>\r\n      </div>\r\n    )\r\n  })\r\n}, {__STORY__, __ADDS_MAP__,__MAIN_FILE_LOCATION__,__MODULE_DEPENDENCIES__,__LOCAL_DEPENDENCIES__,__SOURCE_PREFIX__,__IDS_TO_FRAMEWORKS__});\nAsyncAction.story = {\r\n  name: \'Async Action\',\r\n}\r\n',locationsMap:{"basic--sync-action":{startLoc:{col:26,line:39},endLoc:{col:139,line:57},startBody:{col:26,line:39},endBody:{col:139,line:57}},"basic--async-action":{startLoc:{col:27,line:62},endLoc:{col:139,line:99},startBody:{col:27,line:62},endBody:{col:139,line:99}}}},storySource:{source:"import React, { useCallback, useMemo } from 'react'\r\nimport { ReactFluentReducer } from '../src'\r\nexport default {\r\n  title: 'Basic',\r\n}\r\ninterface IRootState {\r\n  name: string\r\n  age: number\r\n  status: string\r\n}\r\nconst DEFAULT_STATE: IRootState = {\r\n  name: 'test',\r\n  age: 20,\r\n  status: 'wait'\r\n}\r\n\r\nexport const SyncAction = () => {\r\n  const reducer = useMemo(() => new ReactFluentReducer<'test', IRootState>(DEFAULT_STATE), [])\r\n  const changeName = useMemo(() => reducer.sync<string>('TEST', (state, name) => {\r\n    state.name = name\r\n  }), [reducer])\r\n\r\n  return React.createElement(() => {\r\n    const [state, dispatch] = reducer.useFluentReducer()\r\n    const _handleOnClick = useCallback(() => {\r\n      dispatch(changeName(Date.now().toString()))\r\n    }, [dispatch])\r\n    return (\r\n      <div>\r\n        <button onClick={_handleOnClick}>click</button>\r\n        <div>{state.name}</div>\r\n      </div>\r\n    )\r\n  })\r\n}\r\nSyncAction.story = {\r\n  name: 'Sync Action',\r\n}\r\n\r\nexport const AsyncAction = () => {\r\n  const reducer = useMemo(() => new ReactFluentReducer<'test', IRootState>(DEFAULT_STATE), [])\r\n  const changeName = useMemo(() => reducer.async<string, string, Error>('TEST', (name) => {\r\n    return new Promise((resolve, reject) => {\r\n      setTimeout(() => {\r\n        if (name) {\r\n          resolve(name)\r\n        } else {\r\n          reject(new Error('name is required'))\r\n        }\r\n      }, 2000)\r\n    })\r\n  }, {\r\n    started(state, name) {\r\n      state.status = 'started'\r\n    },\r\n    failed(state, { error }) {\r\n      console.error(error)\r\n      state.status = 'failed'\r\n    },\r\n    done(state, { result }) {\r\n      state.name = result\r\n      state.status = 'done'\r\n    }\r\n  }), [reducer])\r\n  return React.createElement(() => {\r\n    const [state, dispatch] = reducer.useFluentReducer()\r\n    const _handleOnClick = useCallback(() => {\r\n      dispatch(changeName(Date.now().toString()))\r\n    }, [dispatch])\r\n    return (\r\n      <div>\r\n        <button onClick={_handleOnClick} disabled={state.status === 'started'}>click</button>\r\n        <div>{state.status}: {state.name}</div>\r\n      </div>\r\n    )\r\n  })\r\n}\r\nAsyncAction.story = {\r\n  name: 'Async Action',\r\n}\r\n",locationsMap:{"basic--sync-action":{startLoc:{col:26,line:17},endLoc:{col:1,line:35},startBody:{col:26,line:17},endBody:{col:1,line:35}},"basic--async-action":{startLoc:{col:27,line:40},endLoc:{col:1,line:77},startBody:{col:27,line:40},endBody:{col:1,line:77}}}}},title:"Basic"};var DEFAULT_STATE={name:"test",age:20,status:"wait"},SyncAction=addSourceDecorator(addSourceDecorator((function(){var reducer=Object(react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return new _src__WEBPACK_IMPORTED_MODULE_1__.a(DEFAULT_STATE)}),[]),changeName=Object(react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return reducer.sync("TEST",(function(state,name){state.name=name}))}),[reducer]);return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement((function(){var _a=reducer.useFluentReducer(),state=_a[0],dispatch=_a[1],_handleOnClick=Object(react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(){dispatch(changeName(Date.now().toString()))}),[dispatch]);return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("button",{onClick:_handleOnClick},"click"),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",null,state.name))}))}),{__STORY__:__STORY__,__ADDS_MAP__:__ADDS_MAP__,__MAIN_FILE_LOCATION__:"/0-Basic.stories.tsx",__MODULE_DEPENDENCIES__:__MODULE_DEPENDENCIES__,__LOCAL_DEPENDENCIES__:__LOCAL_DEPENDENCIES__,__SOURCE_PREFIX__:__SOURCE_PREFIX__,__IDS_TO_FRAMEWORKS__:__IDS_TO_FRAMEWORKS__}),{__STORY__:__STORY__,__ADDS_MAP__:__ADDS_MAP__,__MAIN_FILE_LOCATION__:"/0-Basic.stories.tsx",__MODULE_DEPENDENCIES__:__MODULE_DEPENDENCIES__,__LOCAL_DEPENDENCIES__:__LOCAL_DEPENDENCIES__,__SOURCE_PREFIX__:__SOURCE_PREFIX__,__IDS_TO_FRAMEWORKS__:__IDS_TO_FRAMEWORKS__});SyncAction.story={name:"Sync Action"};var AsyncAction=addSourceDecorator(addSourceDecorator((function(){var reducer=Object(react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return new _src__WEBPACK_IMPORTED_MODULE_1__.a(DEFAULT_STATE)}),[]),changeName=Object(react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return reducer.async("TEST",(function(name){return new Promise((function(resolve,reject){setTimeout((function(){name?resolve(name):reject(new Error("name is required"))}),2e3)}))}),{started:function(state,name){state.status="started"},failed:function(state,_a){var error=_a.error;console.error(error),state.status="failed"},done:function(state,_a){var result=_a.result;state.name=result,state.status="done"}})}),[reducer]);return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement((function(){var _a=reducer.useFluentReducer(),state=_a[0],dispatch=_a[1],_handleOnClick=Object(react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(){dispatch(changeName(Date.now().toString()))}),[dispatch]);return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("button",{onClick:_handleOnClick,disabled:"started"===state.status},"click"),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",null,state.status,": ",state.name))}))}),{__STORY__:__STORY__,__ADDS_MAP__:__ADDS_MAP__,__MAIN_FILE_LOCATION__:"/0-Basic.stories.tsx",__MODULE_DEPENDENCIES__:__MODULE_DEPENDENCIES__,__LOCAL_DEPENDENCIES__:__LOCAL_DEPENDENCIES__,__SOURCE_PREFIX__:__SOURCE_PREFIX__,__IDS_TO_FRAMEWORKS__:__IDS_TO_FRAMEWORKS__}),{__STORY__:__STORY__,__ADDS_MAP__:__ADDS_MAP__,__MAIN_FILE_LOCATION__:"/0-Basic.stories.tsx",__MODULE_DEPENDENCIES__:__MODULE_DEPENDENCIES__,__LOCAL_DEPENDENCIES__:__LOCAL_DEPENDENCIES__,__SOURCE_PREFIX__:__SOURCE_PREFIX__,__IDS_TO_FRAMEWORKS__:__IDS_TO_FRAMEWORKS__});AsyncAction.story={name:"Async Action"}},609:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Middleware",(function(){return Middleware}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_src__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(55),addSourceDecorator=(__webpack_require__(16).withSource,__webpack_require__(16).addSource),__SOURCE_PREFIX__=(__webpack_require__(16).withSource,addSourceDecorator=__webpack_require__(16).addSource,"C:\\Users\\sable\\Documents\\projects\\fluent-reducer\\stories"),__STORY__="import React, { useCallback, useMemo } from 'react'\r\nimport { ReactFluentReducer } from '../src'\r\n\r\nexport default {\r\n  title: 'Middleware',\r\n}\r\ninterface IRootState {\r\n  name: string\r\n  count: number\r\n}\r\nconst DEFAULT_STATE: IRootState = {\r\n  name: 'test',\r\n  count: 0\r\n}\r\nexport const Middleware = () => {\r\n  const reducer = useMemo(() => new ReactFluentReducer<'test', IRootState>(DEFAULT_STATE, {\r\n    middlewares: [\r\n      (state, action) => {\r\n        state.count++\r\n      }\r\n    ]\r\n  }), [])\r\n  const changeName = useMemo(() => reducer.sync<string>('CHANGE_NAME', (state, name) => {\r\n    state.name = name\r\n  }), [reducer])\r\n\r\n  return React.createElement(() => {\r\n    const [state, dispatch] = reducer.useFluentReducer()\r\n    const _handleOnClick = useCallback(() => {\r\n      dispatch(changeName(Date.now().toString()))\r\n    }, [dispatch])\r\n    return (\r\n      <div>\r\n        <button onClick={_handleOnClick}>click</button>\r\n        <div>{state.name} 実行数{state.count}回</div>\r\n      </div>\r\n    )\r\n  })\r\n}\r\nMiddleware.story = {\r\n  name: 'Middlewares',\r\n}\r\n",__ADDS_MAP__={"middleware--middleware":{startLoc:{col:26,line:15},endLoc:{col:1,line:39},startBody:{col:26,line:15},endBody:{col:1,line:39}}},__MODULE_DEPENDENCIES__=[],__LOCAL_DEPENDENCIES__={},__IDS_TO_FRAMEWORKS__={};__webpack_exports__.default={parameters:{storySource:{source:'\n\n// @ts-nocheck\n// @ts-ignore\nvar withSourceLoader = require(\'@storybook/source-loader/preview\').withSource;\n// @ts-ignore\nvar addSourceDecorator = require("@storybook/source-loader/preview").addSource;\n// @ts-ignore\nvar __SOURCE_PREFIX__ = "C:\\\\Users\\\\sable\\\\Documents\\\\projects\\\\fluent-reducer\\\\stories";\n// @ts-ignore\nvar __STORY__ = "import React, { useCallback, useMemo } from \'react\'\\r\\nimport { ReactFluentReducer } from \'../src\'\\r\\n\\r\\nexport default {\\r\\n  title: \'Middleware\',\\r\\n}\\r\\ninterface IRootState {\\r\\n  name: string\\r\\n  count: number\\r\\n}\\r\\nconst DEFAULT_STATE: IRootState = {\\r\\n  name: \'test\',\\r\\n  count: 0\\r\\n}\\r\\nexport const Middleware = () => {\\r\\n  const reducer = useMemo(() => new ReactFluentReducer<\'test\', IRootState>(DEFAULT_STATE, {\\r\\n    middlewares: [\\r\\n      (state, action) => {\\r\\n        state.count++\\r\\n      }\\r\\n    ]\\r\\n  }), [])\\r\\n  const changeName = useMemo(() => reducer.sync<string>(\'CHANGE_NAME\', (state, name) => {\\r\\n    state.name = name\\r\\n  }), [reducer])\\r\\n\\r\\n  return React.createElement(() => {\\r\\n    const [state, dispatch] = reducer.useFluentReducer()\\r\\n    const _handleOnClick = useCallback(() => {\\r\\n      dispatch(changeName(Date.now().toString()))\\r\\n    }, [dispatch])\\r\\n    return (\\r\\n      <div>\\r\\n        <button onClick={_handleOnClick}>click</button>\\r\\n        <div>{state.name} 実行数{state.count}回</div>\\r\\n      </div>\\r\\n    )\\r\\n  })\\r\\n}\\r\\nMiddleware.story = {\\r\\n  name: \'Middlewares\',\\r\\n}\\r\\n";\n// @ts-ignore\nvar __ADDS_MAP__ = {"middleware--middleware":{"startLoc":{"col":26,"line":15},"endLoc":{"col":1,"line":39},"startBody":{"col":26,"line":15},"endBody":{"col":1,"line":39}}};\n// @ts-ignore\nvar __MAIN_FILE_LOCATION__ = "/1-Middleware.stories.tsx";\n// @ts-ignore\nvar __MODULE_DEPENDENCIES__ = [];\n// @ts-ignore\nvar __LOCAL_DEPENDENCIES__ = {};\n// @ts-ignore\nvar __IDS_TO_FRAMEWORKS__ = {};\n        \nimport React, { useCallback, useMemo } from \'react\'\r\nimport { ReactFluentReducer } from \'../src\'\r\n\r\nexport default {parameters: {"storySource":{"source":"import React, { useCallback, useMemo } from \'react\'\\r\\nimport { ReactFluentReducer } from \'../src\'\\r\\n\\r\\nexport default {\\r\\n  title: \'Middleware\',\\r\\n}\\r\\ninterface IRootState {\\r\\n  name: string\\r\\n  count: number\\r\\n}\\r\\nconst DEFAULT_STATE: IRootState = {\\r\\n  name: \'test\',\\r\\n  count: 0\\r\\n}\\r\\nexport const Middleware = () => {\\r\\n  const reducer = useMemo(() => new ReactFluentReducer<\'test\', IRootState>(DEFAULT_STATE, {\\r\\n    middlewares: [\\r\\n      (state, action) => {\\r\\n        state.count++\\r\\n      }\\r\\n    ]\\r\\n  }), [])\\r\\n  const changeName = useMemo(() => reducer.sync<string>(\'CHANGE_NAME\', (state, name) => {\\r\\n    state.name = name\\r\\n  }), [reducer])\\r\\n\\r\\n  return React.createElement(() => {\\r\\n    const [state, dispatch] = reducer.useFluentReducer()\\r\\n    const _handleOnClick = useCallback(() => {\\r\\n      dispatch(changeName(Date.now().toString()))\\r\\n    }, [dispatch])\\r\\n    return (\\r\\n      <div>\\r\\n        <button onClick={_handleOnClick}>click</button>\\r\\n        <div>{state.name} 実行数{state.count}回</div>\\r\\n      </div>\\r\\n    )\\r\\n  })\\r\\n}\\r\\nMiddleware.story = {\\r\\n  name: \'Middlewares\',\\r\\n}\\r\\n","locationsMap":{"middleware--middleware":{"startLoc":{"col":26,"line":15},"endLoc":{"col":1,"line":39},"startBody":{"col":26,"line":15},"endBody":{"col":1,"line":39}}}},},\r\n  title: \'Middleware\',\r\n}\r\ninterface IRootState {\r\n  name: string\r\n  count: number\r\n}\r\nconst DEFAULT_STATE: IRootState = {\r\n  name: \'test\',\r\n  count: 0\r\n}\r\nexport const Middleware = addSourceDecorator(() => {\r\n  const reducer = useMemo(() => new ReactFluentReducer<\'test\', IRootState>(DEFAULT_STATE, {\r\n    middlewares: [\r\n      (state, action) => {\r\n        state.count++\r\n      }\r\n    ]\r\n  }), [])\r\n  const changeName = useMemo(() => reducer.sync<string>(\'CHANGE_NAME\', (state, name) => {\r\n    state.name = name\r\n  }), [reducer])\r\n\r\n  return React.createElement(() => {\r\n    const [state, dispatch] = reducer.useFluentReducer()\r\n    const _handleOnClick = useCallback(() => {\r\n      dispatch(changeName(Date.now().toString()))\r\n    }, [dispatch])\r\n    return (\r\n      <div>\r\n        <button onClick={_handleOnClick}>click</button>\r\n        <div>{state.name} 実行数{state.count}回</div>\r\n      </div>\r\n    )\r\n  })\r\n}, {__STORY__, __ADDS_MAP__,__MAIN_FILE_LOCATION__,__MODULE_DEPENDENCIES__,__LOCAL_DEPENDENCIES__,__SOURCE_PREFIX__,__IDS_TO_FRAMEWORKS__});\nMiddleware.story = {\r\n  name: \'Middlewares\',\r\n}\r\n',locationsMap:{"middleware--middleware":{startLoc:{col:26,line:37},endLoc:{col:139,line:61},startBody:{col:26,line:37},endBody:{col:139,line:61}}}},storySource:{source:"import React, { useCallback, useMemo } from 'react'\r\nimport { ReactFluentReducer } from '../src'\r\n\r\nexport default {\r\n  title: 'Middleware',\r\n}\r\ninterface IRootState {\r\n  name: string\r\n  count: number\r\n}\r\nconst DEFAULT_STATE: IRootState = {\r\n  name: 'test',\r\n  count: 0\r\n}\r\nexport const Middleware = () => {\r\n  const reducer = useMemo(() => new ReactFluentReducer<'test', IRootState>(DEFAULT_STATE, {\r\n    middlewares: [\r\n      (state, action) => {\r\n        state.count++\r\n      }\r\n    ]\r\n  }), [])\r\n  const changeName = useMemo(() => reducer.sync<string>('CHANGE_NAME', (state, name) => {\r\n    state.name = name\r\n  }), [reducer])\r\n\r\n  return React.createElement(() => {\r\n    const [state, dispatch] = reducer.useFluentReducer()\r\n    const _handleOnClick = useCallback(() => {\r\n      dispatch(changeName(Date.now().toString()))\r\n    }, [dispatch])\r\n    return (\r\n      <div>\r\n        <button onClick={_handleOnClick}>click</button>\r\n        <div>{state.name} 実行数{state.count}回</div>\r\n      </div>\r\n    )\r\n  })\r\n}\r\nMiddleware.story = {\r\n  name: 'Middlewares',\r\n}\r\n",locationsMap:{"middleware--middleware":{startLoc:{col:26,line:15},endLoc:{col:1,line:39},startBody:{col:26,line:15},endBody:{col:1,line:39}}}}},title:"Middleware"};var DEFAULT_STATE={name:"test",count:0},Middleware=addSourceDecorator(addSourceDecorator((function(){var reducer=Object(react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return new _src__WEBPACK_IMPORTED_MODULE_1__.a(DEFAULT_STATE,{middlewares:[function(state,action){state.count++}]})}),[]),changeName=Object(react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return reducer.sync("CHANGE_NAME",(function(state,name){state.name=name}))}),[reducer]);return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement((function(){var _a=reducer.useFluentReducer(),state=_a[0],dispatch=_a[1],_handleOnClick=Object(react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(){dispatch(changeName(Date.now().toString()))}),[dispatch]);return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("button",{onClick:_handleOnClick},"click"),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",null,state.name," 実行数",state.count,"回"))}))}),{__STORY__:__STORY__,__ADDS_MAP__:__ADDS_MAP__,__MAIN_FILE_LOCATION__:"/1-Middleware.stories.tsx",__MODULE_DEPENDENCIES__:__MODULE_DEPENDENCIES__,__LOCAL_DEPENDENCIES__:__LOCAL_DEPENDENCIES__,__SOURCE_PREFIX__:__SOURCE_PREFIX__,__IDS_TO_FRAMEWORKS__:__IDS_TO_FRAMEWORKS__}),{__STORY__:__STORY__,__ADDS_MAP__:__ADDS_MAP__,__MAIN_FILE_LOCATION__:"/1-Middleware.stories.tsx",__MODULE_DEPENDENCIES__:__MODULE_DEPENDENCIES__,__LOCAL_DEPENDENCIES__:__LOCAL_DEPENDENCIES__,__SOURCE_PREFIX__:__SOURCE_PREFIX__,__IDS_TO_FRAMEWORKS__:__IDS_TO_FRAMEWORKS__});Middleware.story={name:"Middlewares"}},610:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Subscribe",(function(){return Subscribe}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_src__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(55),addSourceDecorator=(__webpack_require__(16).withSource,__webpack_require__(16).addSource),__SOURCE_PREFIX__=(__webpack_require__(16).withSource,addSourceDecorator=__webpack_require__(16).addSource,"C:\\Users\\sable\\Documents\\projects\\fluent-reducer\\stories"),__STORY__="import React, { useCallback, useEffect, useMemo, useState } from 'react'\r\nimport { ReactFluentReducer } from '../src'\r\n\r\nexport default {\r\n  title: 'Subscribe',\r\n}\r\ninterface IRootState {\r\n  name: string\r\n  count: number\r\n}\r\nconst DEFAULT_STATE: IRootState = {\r\n  name: 'test',\r\n  count: 0\r\n}\r\n\r\nexport const Subscribe = () => {\r\n  const reducer = useMemo(() => new ReactFluentReducer<'test', IRootState>(DEFAULT_STATE), [])\r\n  const changeName = useMemo(() => reducer.sync<string>('CHANGE_NAME', (state, name) => {\r\n    state.name = name\r\n  }), [reducer])\r\n\r\n  return React.createElement(() => {\r\n    const [state, dispatch] = reducer.useFluentReducer()\r\n    const [count, setCount] = useState(0)\r\n    useEffect(() => {\r\n      reducer.subscribe((state, name) => {\r\n        setCount((count) => {\r\n          return count + 1\r\n        })\r\n      })\r\n      return () => {\r\n        reducer.unsubsribeAll()\r\n      }\r\n    }, [reducer])\r\n    const _handleOnClick = useCallback(() => {\r\n      dispatch(changeName(Date.now().toString()))\r\n    }, [dispatch])\r\n    return (\r\n      <div>\r\n        <button onClick={_handleOnClick}>click</button>\r\n        <div>{state.name} 実行数{count}回</div>\r\n      </div>\r\n    )\r\n  })\r\n}\r\nSubscribe.story = {\r\n  name: 'Subscribe',\r\n}\r\n\r\n",__ADDS_MAP__={"subscribe--subscribe":{startLoc:{col:25,line:16},endLoc:{col:1,line:45},startBody:{col:25,line:16},endBody:{col:1,line:45}}},__MODULE_DEPENDENCIES__=[],__LOCAL_DEPENDENCIES__={},__IDS_TO_FRAMEWORKS__={};__webpack_exports__.default={parameters:{storySource:{source:'\n\n// @ts-nocheck\n// @ts-ignore\nvar withSourceLoader = require(\'@storybook/source-loader/preview\').withSource;\n// @ts-ignore\nvar addSourceDecorator = require("@storybook/source-loader/preview").addSource;\n// @ts-ignore\nvar __SOURCE_PREFIX__ = "C:\\\\Users\\\\sable\\\\Documents\\\\projects\\\\fluent-reducer\\\\stories";\n// @ts-ignore\nvar __STORY__ = "import React, { useCallback, useEffect, useMemo, useState } from \'react\'\\r\\nimport { ReactFluentReducer } from \'../src\'\\r\\n\\r\\nexport default {\\r\\n  title: \'Subscribe\',\\r\\n}\\r\\ninterface IRootState {\\r\\n  name: string\\r\\n  count: number\\r\\n}\\r\\nconst DEFAULT_STATE: IRootState = {\\r\\n  name: \'test\',\\r\\n  count: 0\\r\\n}\\r\\n\\r\\nexport const Subscribe = () => {\\r\\n  const reducer = useMemo(() => new ReactFluentReducer<\'test\', IRootState>(DEFAULT_STATE), [])\\r\\n  const changeName = useMemo(() => reducer.sync<string>(\'CHANGE_NAME\', (state, name) => {\\r\\n    state.name = name\\r\\n  }), [reducer])\\r\\n\\r\\n  return React.createElement(() => {\\r\\n    const [state, dispatch] = reducer.useFluentReducer()\\r\\n    const [count, setCount] = useState(0)\\r\\n    useEffect(() => {\\r\\n      reducer.subscribe((state, name) => {\\r\\n        setCount((count) => {\\r\\n          return count + 1\\r\\n        })\\r\\n      })\\r\\n      return () => {\\r\\n        reducer.unsubsribeAll()\\r\\n      }\\r\\n    }, [reducer])\\r\\n    const _handleOnClick = useCallback(() => {\\r\\n      dispatch(changeName(Date.now().toString()))\\r\\n    }, [dispatch])\\r\\n    return (\\r\\n      <div>\\r\\n        <button onClick={_handleOnClick}>click</button>\\r\\n        <div>{state.name} 実行数{count}回</div>\\r\\n      </div>\\r\\n    )\\r\\n  })\\r\\n}\\r\\nSubscribe.story = {\\r\\n  name: \'Subscribe\',\\r\\n}\\r\\n\\r\\n";\n// @ts-ignore\nvar __ADDS_MAP__ = {"subscribe--subscribe":{"startLoc":{"col":25,"line":16},"endLoc":{"col":1,"line":45},"startBody":{"col":25,"line":16},"endBody":{"col":1,"line":45}}};\n// @ts-ignore\nvar __MAIN_FILE_LOCATION__ = "/2-Subscribe.stories.tsx";\n// @ts-ignore\nvar __MODULE_DEPENDENCIES__ = [];\n// @ts-ignore\nvar __LOCAL_DEPENDENCIES__ = {};\n// @ts-ignore\nvar __IDS_TO_FRAMEWORKS__ = {};\n        \nimport React, { useCallback, useEffect, useMemo, useState } from \'react\'\r\nimport { ReactFluentReducer } from \'../src\'\r\n\r\nexport default {parameters: {"storySource":{"source":"import React, { useCallback, useEffect, useMemo, useState } from \'react\'\\r\\nimport { ReactFluentReducer } from \'../src\'\\r\\n\\r\\nexport default {\\r\\n  title: \'Subscribe\',\\r\\n}\\r\\ninterface IRootState {\\r\\n  name: string\\r\\n  count: number\\r\\n}\\r\\nconst DEFAULT_STATE: IRootState = {\\r\\n  name: \'test\',\\r\\n  count: 0\\r\\n}\\r\\n\\r\\nexport const Subscribe = () => {\\r\\n  const reducer = useMemo(() => new ReactFluentReducer<\'test\', IRootState>(DEFAULT_STATE), [])\\r\\n  const changeName = useMemo(() => reducer.sync<string>(\'CHANGE_NAME\', (state, name) => {\\r\\n    state.name = name\\r\\n  }), [reducer])\\r\\n\\r\\n  return React.createElement(() => {\\r\\n    const [state, dispatch] = reducer.useFluentReducer()\\r\\n    const [count, setCount] = useState(0)\\r\\n    useEffect(() => {\\r\\n      reducer.subscribe((state, name) => {\\r\\n        setCount((count) => {\\r\\n          return count + 1\\r\\n        })\\r\\n      })\\r\\n      return () => {\\r\\n        reducer.unsubsribeAll()\\r\\n      }\\r\\n    }, [reducer])\\r\\n    const _handleOnClick = useCallback(() => {\\r\\n      dispatch(changeName(Date.now().toString()))\\r\\n    }, [dispatch])\\r\\n    return (\\r\\n      <div>\\r\\n        <button onClick={_handleOnClick}>click</button>\\r\\n        <div>{state.name} 実行数{count}回</div>\\r\\n      </div>\\r\\n    )\\r\\n  })\\r\\n}\\r\\nSubscribe.story = {\\r\\n  name: \'Subscribe\',\\r\\n}\\r\\n\\r\\n","locationsMap":{"subscribe--subscribe":{"startLoc":{"col":25,"line":16},"endLoc":{"col":1,"line":45},"startBody":{"col":25,"line":16},"endBody":{"col":1,"line":45}}}},},\r\n  title: \'Subscribe\',\r\n}\r\ninterface IRootState {\r\n  name: string\r\n  count: number\r\n}\r\nconst DEFAULT_STATE: IRootState = {\r\n  name: \'test\',\r\n  count: 0\r\n}\r\n\r\nexport const Subscribe = addSourceDecorator(() => {\r\n  const reducer = useMemo(() => new ReactFluentReducer<\'test\', IRootState>(DEFAULT_STATE), [])\r\n  const changeName = useMemo(() => reducer.sync<string>(\'CHANGE_NAME\', (state, name) => {\r\n    state.name = name\r\n  }), [reducer])\r\n\r\n  return React.createElement(() => {\r\n    const [state, dispatch] = reducer.useFluentReducer()\r\n    const [count, setCount] = useState(0)\r\n    useEffect(() => {\r\n      reducer.subscribe((state, name) => {\r\n        setCount((count) => {\r\n          return count + 1\r\n        })\r\n      })\r\n      return () => {\r\n        reducer.unsubsribeAll()\r\n      }\r\n    }, [reducer])\r\n    const _handleOnClick = useCallback(() => {\r\n      dispatch(changeName(Date.now().toString()))\r\n    }, [dispatch])\r\n    return (\r\n      <div>\r\n        <button onClick={_handleOnClick}>click</button>\r\n        <div>{state.name} 実行数{count}回</div>\r\n      </div>\r\n    )\r\n  })\r\n}, {__STORY__, __ADDS_MAP__,__MAIN_FILE_LOCATION__,__MODULE_DEPENDENCIES__,__LOCAL_DEPENDENCIES__,__SOURCE_PREFIX__,__IDS_TO_FRAMEWORKS__});\nSubscribe.story = {\r\n  name: \'Subscribe\',\r\n}\r\n\r\n',locationsMap:{"subscribe--subscribe":{startLoc:{col:25,line:38},endLoc:{col:139,line:67},startBody:{col:25,line:38},endBody:{col:139,line:67}}}},storySource:{source:"import React, { useCallback, useEffect, useMemo, useState } from 'react'\r\nimport { ReactFluentReducer } from '../src'\r\n\r\nexport default {\r\n  title: 'Subscribe',\r\n}\r\ninterface IRootState {\r\n  name: string\r\n  count: number\r\n}\r\nconst DEFAULT_STATE: IRootState = {\r\n  name: 'test',\r\n  count: 0\r\n}\r\n\r\nexport const Subscribe = () => {\r\n  const reducer = useMemo(() => new ReactFluentReducer<'test', IRootState>(DEFAULT_STATE), [])\r\n  const changeName = useMemo(() => reducer.sync<string>('CHANGE_NAME', (state, name) => {\r\n    state.name = name\r\n  }), [reducer])\r\n\r\n  return React.createElement(() => {\r\n    const [state, dispatch] = reducer.useFluentReducer()\r\n    const [count, setCount] = useState(0)\r\n    useEffect(() => {\r\n      reducer.subscribe((state, name) => {\r\n        setCount((count) => {\r\n          return count + 1\r\n        })\r\n      })\r\n      return () => {\r\n        reducer.unsubsribeAll()\r\n      }\r\n    }, [reducer])\r\n    const _handleOnClick = useCallback(() => {\r\n      dispatch(changeName(Date.now().toString()))\r\n    }, [dispatch])\r\n    return (\r\n      <div>\r\n        <button onClick={_handleOnClick}>click</button>\r\n        <div>{state.name} 実行数{count}回</div>\r\n      </div>\r\n    )\r\n  })\r\n}\r\nSubscribe.story = {\r\n  name: 'Subscribe',\r\n}\r\n\r\n",locationsMap:{"subscribe--subscribe":{startLoc:{col:25,line:16},endLoc:{col:1,line:45},startBody:{col:25,line:16},endBody:{col:1,line:45}}}}},title:"Subscribe"};var DEFAULT_STATE={name:"test",count:0},Subscribe=addSourceDecorator(addSourceDecorator((function(){var reducer=Object(react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return new _src__WEBPACK_IMPORTED_MODULE_1__.a(DEFAULT_STATE)}),[]),changeName=Object(react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return reducer.sync("CHANGE_NAME",(function(state,name){state.name=name}))}),[reducer]);return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement((function(){var _a=reducer.useFluentReducer(),state=_a[0],dispatch=_a[1],_b=Object(react__WEBPACK_IMPORTED_MODULE_0__.useState)(0),count=_b[0],setCount=_b[1];Object(react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){return reducer.subscribe((function(state,name){setCount((function(count){return count+1}))})),function(){reducer.unsubsribeAll()}}),[reducer]);var _handleOnClick=Object(react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(){dispatch(changeName(Date.now().toString()))}),[dispatch]);return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("button",{onClick:_handleOnClick},"click"),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",null,state.name," 実行数",count,"回"))}))}),{__STORY__:__STORY__,__ADDS_MAP__:__ADDS_MAP__,__MAIN_FILE_LOCATION__:"/2-Subscribe.stories.tsx",__MODULE_DEPENDENCIES__:__MODULE_DEPENDENCIES__,__LOCAL_DEPENDENCIES__:__LOCAL_DEPENDENCIES__,__SOURCE_PREFIX__:__SOURCE_PREFIX__,__IDS_TO_FRAMEWORKS__:__IDS_TO_FRAMEWORKS__}),{__STORY__:__STORY__,__ADDS_MAP__:__ADDS_MAP__,__MAIN_FILE_LOCATION__:"/2-Subscribe.stories.tsx",__MODULE_DEPENDENCIES__:__MODULE_DEPENDENCIES__,__LOCAL_DEPENDENCIES__:__LOCAL_DEPENDENCIES__,__SOURCE_PREFIX__:__SOURCE_PREFIX__,__IDS_TO_FRAMEWORKS__:__IDS_TO_FRAMEWORKS__});Subscribe.story={name:"Subscribe"}}},[[267,1,2]]]);
//# sourceMappingURL=main.f9aa8da7070035c7b6bd.bundle.js.map